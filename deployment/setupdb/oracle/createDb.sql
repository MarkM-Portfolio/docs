-- ***************************************************************** 
--                                                                   
-- IBM Confidential                                                  
--                                                                   
-- IBM Docs Source Materials                                         
--                                                                   
-- (c) Copyright IBM Corporation 2012. All Rights Reserved.          
--                                                                   
-- U.S. Government Users Restricted Rights: Use, duplication or      
-- disclosure restricted by GSA ADP Schedule Contract with IBM Corp. 
--                                                                   
-- ***************************************************************** 


	CREATE SMALLFILE TABLESPACE "DOCSTS8" DATAFILE 'DOCSTS8' SIZE 8M REUSE AUTOEXTEND ON NEXT 8M 
		MAXSIZE UNLIMITED LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;

	CREATE SMALLFILE TABLESPACE "DOCSTS32" DATAFILE 'DOCSTS32' SIZE 32M REUSE AUTOEXTEND ON NEXT 16M 
		MAXSIZE UNLIMITED LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;

	CREATE USER "CONCORDDB" PROFILE "DEFAULT" IDENTIFIED BY "&&password" DEFAULT TABLESPACE "DOCSTS32" TEMPORARY TABLESPACE "TEMP" ACCOUNT UNLOCK;
	ALTER USER CONCORDDB QUOTA UNLIMITED ON DOCSTS32;
	ALTER USER CONCORDDB QUOTA UNLIMITED ON DOCSTS8;
	
	CREATE ROLE DOCSUSER_ROLE;
	CREATE USER "DOCSUSER" PROFILE "DEFAULT" IDENTIFIED BY "&password" DEFAULT TABLESPACE "DOCSTS32" TEMPORARY TABLESPACE "TEMP" ACCOUNT UNLOCK;
	ALTER USER DOCSUSER QUOTA UNLIMITED ON DOCSTS32;
	ALTER USER DOCSUSER QUOTA UNLIMITED ON DOCSTS8;
		
	GRANT CONNECT, RESOURCE TO CONCORDDB;
	GRANT ALTER TABLESPACE TO CONCORDDB;
	
	COMMIT;

	ALTER SESSION SET CURRENT_SCHEMA = CONCORDDB;

-- userpreference			
CREATE TABLE "CONCORDDB"."USERPREFERENCE"  (
  "ID" VARCHAR2(2048) NOT NULL , 
  "ORGID" VARCHAR2(256),
  "PREFERENCE" BLOB )   
TABLESPACE "DOCSTS32";

ALTER TABLE "CONCORDDB"."USERPREFERENCE" ADD CONSTRAINT "USERPREFERENCE_PID" PRIMARY KEY ("ID");

CREATE TABLE "CONCORDDB"."DOCEDITORS" (
	"REPOID" VARCHAR2(2048) NOT NULL,
	"DOCID" VARCHAR2(2048) NOT NULL,
	"USERID" VARCHAR2(2048) NOT NULL,
	"ORGID" VARCHAR2(2048) NOT NULL,
	"DISPLAYNAME" VARCHAR2(2048),
	"COLOR" VARCHAR2(64))
TABLESPACE "DOCSTS32";
-- This PID will be added in fixup6.sql, as compatible with DB@ sqls
--ALTER TABLE "CONCORDDB"."USERPREFERENCE" ADD CONSTRAINT "USERPREFERENCE_PID" PRIMARY KEY ("ID");


CREATE TABLE "CONCORDDB"."DOC_ACTIVITY" (
	"REPO_ID" VARCHAR2(256) NOT NULL,
	"URI" VARCHAR2(256) NOT NULL,
	"ACTIVITY_ID" VARCHAR2(256) NOT NULL,
	"ORGID" VARCHAR2(256) NOT NULL,
	"CREATEDBY" VARCHAR2(256) NOT NULL,
	"CREATIONDATE" TIMESTAMP)
TABLESPACE "DOCSTS32";

ALTER TABLE "CONCORDDB"."DOC_ACTIVITY" ADD CONSTRAINT "DOC_ACTIVITY_PID" PRIMARY KEY ("REPO_ID", "URI");

--repo_id(string) uri(string) org_id (string), user_id (string) activity_id(string) creationdate (string)
CREATE TABLE "CONCORDDB"."DOC_REFERENCE" (
	"PARENT_REPO" VARCHAR2(256) NOT NULL,
	"PARENT_URI" VARCHAR2(256) NOT NULL,
	"CHILD_REPO" VARCHAR2(256) NOT NULL,
	"CHILD_URI" VARCHAR2(256) NOT NULL,
	"ORGID" VARCHAR2(256),
	"CREATEDBY" VARCHAR2(256),
	"CREATIONDATE" TIMESTAMP)
TABLESPACE "DOCSTS8";

ALTER TABLE "CONCORDDB"."DOC_REFERENCE" ADD CONSTRAINT "DOC_REFERENCE_PID" PRIMARY KEY ("PARENT_REPO", "PARENT_URI", "CHILD_REPO", "CHILD_URI");


--parent_repo (string) parent_uri (string) child_repo (string) child_uri (string) org_id(string) user_id (string) creationdate (timestamp)
-- clipboard			
CREATE TABLE "CONCORDDB"."CLIPBOARD"  (
		  "ID" VARCHAR2(2048) NOT NULL , 
		  "USERID" VARCHAR2 (2048)  NOT NULL ,
		  "ORGID" VARCHAR2(256),
		  "USEREMAIL" VARCHAR2 (1024) ,
		  "TAG" VARCHAR2 (1024) ,
		  "PROVIDERS" VARCHAR2 (2048) ,
		  "CLIPDATA" VARCHAR2 (4000) ,
		  "LASTMODIFICATIONDATE" TIMESTAMP)
TABLESPACE "DOCSTS32";
			
ALTER TABLE "CONCORDDB"."CLIPBOARD" ADD CONSTRAINT "CLIPBOARD_PID" PRIMARY KEY ("ID");

COMMIT;

QUIT;